# API/Интеграция

## [API](https://app.swaggerhub.com/apis-docs/enecuum/EnecuumNodeAPI/1.0.0)

API Enecuum доступен на [Swagger.](https://app.swaggerhub.com/apis-docs/enecuum/EnecuumNodeAPI/1.0.0)

Инструкцию по созданию кошелька в Enecuum можно найти во введении. Инструкции по отправке транзакций и генерации подписей доступны в методе POST /tx.

::: danger ОСТОРОЖНО
ENQ имеет хэш токена/идентификатор/тикер транзакции **0000000000000000000000000000000000000000000000000000000000000000**. Ненулевые значения означают, что вы имеете дело с активом, отличным от Enecuum. Пользовательские токены имеют случайную шестнадцатеричную строку в качестве идентификатора токена.
:::

::: danger ОСТОРОЖНО
Отклоненные транзакции записываются в блокчейн. Используйте GET /tx, чтобы проверить статус транзакции.
:::

Имейте в виду, что любой кошелек, в том числе созданный для технических целей, может получать реферальные вознаграждения. Это может произойти, если кто-то решит использовать реферальный адрес кошелька в качестве своего реферального агента. Эти награды стмечены в блокчейне соответствующим образом.

Чтобы получить объяснение ответов на запросы, перейдите к схемам ответов. Вы можете получить к ним доступ, выбрав «Schema» рядом с «Example Value».

<p align = "center"> <img src="./img/api/schema.png" width = "500"> </p>

## Порядок транзакций

Блокчейн Enecuum состоит из макроблоков. Каждый макроблок содержит ключевой блок (kblock), микроблоки (mblock), статблоки (sblock). Хэши микроблоков лексикографически отсортированы в шестнадцатеричном формате. Микроблоки содержат транзакции, которые также лексикографически отсортированы по шестнадцатеричному хешу.

## Интеграция пользовательских токенов

В некоторых методах API необходимо указывать идентификатор токена. Для ENQ идентификатор токена - это нули. Если идентификатор токена представляет собой случайную шестнадцатеричную строку, это означает, что это пользовательский токен.

Чтобы отправлять транзакции с пользовательскими токенами, используйте POST /tx с указанным идентификатором токена.

Для проверки баланса используйте метод GET /balance с указанным идентификатором токена.

Чтобы узнать комиссию за пользовательский токен, эмиссию и другие параметры, используйте GET /token_info с указанным идентификатором токена. Комиссии за пользовательские токены описаны в руководстве [Принцип работы комиссии](token-issue.md#принцип-работы-комиссии).

## Получение последних транзаций

Чтобы лучше понять структуру блокчейна Enecuum, попробуйте этот пример. Получить список последних транзакций можно следующим образом:

1. Используйте GET /height, чтобы получить номер последнего блока.

<p align = "center"> <img src="./img/api/get_height.png" width = "300"> </p>

2. Используйте GET /macroblock_by_height с номером предыдущего блока в качестве параметра. Вы получите содержимое этого блока: keyblock, microblock, statblock. Только микроблоки содержат транзакции.

<p align = "center"> <img src="./img/api/get_macroblock_by_height.png" width = "700"> </p>

3. Используйте GET /mblock с хешем микроблока в качестве параметра. Вы получите список транзакций этого микроблока.

<p align = "center"> <img src="./img/api/get_mblock.png" width = "700"> </p>